function operator_add(t,r){return t.operator_add(r)}function operator_sub(t,r){return t.operator_sub(r)}function operator_mul(t,r){return t.operator_mul(r)}function operator_div(t,r){return t.operator_div(r)}function operator_mod(t,r){return t.operator_mod(r)}function operator_eq(t,r){return t.operator_eq(r)}function operator_pow(t,r){return Math.pow(t,r)}function operator_lt(t,r){return t.operator_lt(r)}function operator_gt(t,r){return t.operator_gt(r)}function operator_or(t,r){return t||r}function operator_not(t){return!t}function operator_and(t,r){return t&&r}function operator_ne(t,r){return t.operator_ne(r)}function unary_add(t){return t}function unary_sub(t){return-t}Number.prototype.operator_add=function(t){return this+t};Number.prototype.operator_div=function(t){return this/t};Number.prototype.operator_sub=function(t){return this-t};Number.prototype.operator_mul=function(t){return this*t};Number.prototype.operator_eq=function(t){return this==t};Number.prototype.operator_mod=function(t){return this%t};Number.prototype.operator_lt=function(t){return this<t};Number.prototype.operator_gt=function(t){return this>t};Number.prototype.operator_ne=function(t){return this!=t};Number.prototype.toFloat=function(){return this};Number.prototype.toInt=function(){return this|0};String.prototype.operator_eq=function(t){return this==t};String.prototype.operator_ne=function(t){return this!=t};String.prototype.operator_add=function(t){return this+t};function toString(t){return t.toString()}function log(t){console.log(t.toString())}function string_toString(t){return t}function int_toString(t){return t.toString()}function float_toString(t){return t.toString()}function array_toString(t){return t.toString()}function float_toInt(t){return t|0}function int_toInt(t){return t}String.prototype.toInt=function(){return Number(this)|0};String.prototype.toFloat=function(){return Number(this)};function float_toFloat(t){return t}function int_toFloat(t){return t}function isOdd(t){return t%2!=0}function isEven(t){return t%2==0}function min(t,r){return t<r?t:r}function max(t,r){return t>r?t:r}function log_unop(t,r){console.log(t);return r()}function len(t){return t.length}function toFloat(t){return t.toFloat()}function assign(t,r){if(t instanceof Array){var n=[];for(var e=0;e<r.length;e++){var o=r[e];if(o){n.push(o)}else{n.push(t[e])}}for(var e=r.length;e<t.length;e++){n.push(t[e])}return n}else if(typeof t=="object"){return Object.assign(new t.constructor,t,r)}else{return r}}function toInt(t){return t.toInt()}function toJS(t){if(t instanceof Vector){return t.map(toJS).toArray()}if(t instanceof Function){return funcWrapper(t)}return t}function fromJS(t){if(t instanceof Array){return fromArray(t.map(fromJS))}else if(t instanceof Function){return jsFuncWrapper(t)}return t}function funcWrapper(t){return function(){var r=Array.prototype.slice.call(arguments);var n=[];for(var e=0;e<r.length;e++){n.push(fromJS(r[e]))}return toJS(t.apply(null,n))}}function jsFuncWrapper(t){return function(){var r=Array.prototype.slice.call(arguments);var n=[];for(var e=0;e<r.length;e++){n.push(toJS(r[e]))}return fromJS(t.apply(null,n))}}function toAsync(t){return function(){var r=Array.prototype.slice.call(arguments);var n=[];for(var e=0;e<r.length-1;e++){n.push(r[e])}var o=r[r.length-1];return o(t.apply(null,n))}}var _empty_func=function(){};function toSync(t){return function(){var r=Array.prototype.slice.call(arguments);var n=[];for(var e=0;e<r.length;e++){n.push(r[e])}n.push(_empty_func);return t.apply(null,n)}}function unary_read(t){t(this.arg)}function operator_set(t,r){this.arg=t;for(var n=0;n<this.events.length;n++){this.events[n](t,_empty_func)}r()}function atom_watch(t,r){this.events.push(t);r()}function newAtom(t){previousState={unary_read:unary_read,operator_set:operator_set,arg:t,watch:atom_watch,events:[]};return previousState}function newLens(t,r){return{query:function(r){return t(r)},set:function(t,n){return r(t,n)}}}function defer(t){return function(r){return function(n){t(r,n)}}}function Some(t){return[0,t]}var None=[1];function sleep(t,r){setTimeout(r,t)}function parallel(t,r){var n=0;var e=t.length;var o=t;for(var i=0;i<t.length;i++){var a=function(e){return function(i){n++;o=o.set(e,i);if(n==t.length){r(o)}}}(i);t.get(i)(a)}}function serial(t,r){var n=0;var e=t.length;var o=EmptyVector;function i(){if(n==t.length){r(o)}else{t.get(n)(function(t){o=o.append(t);n+=1;i()})}}i()}function core_assign(t,r){return Object.assign(new t.constructor,t,r)}function core_json_int(t){return t|0}function core_json_float(t){return Number(t)}function core_json_bool(t){return!!t}function core_json_string(t){return""+t}function core_json_struct(t,r){return function(n){var e=r.length;var o=new t;for(var i=0;i<e;i++){var a=r[i];o[a[0]]=a[1](n[a[0]])}return o}}function core_json_interface(t){return function(r){var n={};var e=t.length;for(var o=0;o<e;o++){var i=t[o];n[i[0]]=i[1](r[i[0]])}return n}}function core_json_enum(t){return function(r){var n=r[0];var e=[n];for(var o=1;o<r.length;o++){e[o]=t[n][o-1](r[o])}return e}}function core_json_vector(t){return function(r){return fromArray(r.map(t))}}function core_json_tuple(t){return function(r){var n=[];for(var e=0;e<r.length;e++){n.push(t[e](r[e]))}return n}}function parseJson(t,r){var n=JSON.parse(r);return t(n)}function jsonStringify(t){return JSON.stringify(t)}function Vector(t,r,n,e){this.shift=(n-1)*this.bits;this.root=t;this.length=r;this.depth=n;this.start=e||0}Vector.prototype.bits=5;Vector.prototype.width=1<<Vector.prototype.bits;Vector.prototype.mask=Vector.prototype.width-1;var EmptyVector=new Vector(Array(Vector.prototype.width),0,1);Vector.prototype.get=function(t){t=getProperIndex(this,t);if(t>=this.length+this.start||t<0){throw new Error("out of bounds: "+t.toString())}var r=this.root;var n=this.bits;var e=this.mask;for(var o=this.shift;o>0;o-=n){r=r[t>>o&e]}return r[t&e]};Vector.prototype.toJSON=function(){return this.toArray()};Vector.prototype.indexOf=function(t){var r=-1;for(var n=0;n<this.length;n++){if(this.get(n).operator_eq(t)){r+=1;return r}}return-1};Vector.prototype.append_m=function(t){var r=Vector.prototype.width;if(Math.pow(r,this.depth)===this.length||this.length==0){return this.append(t)}var n=this.length;var e=this.root;var o=this.bits;var i=this.mask;for(var a=this.shift;a>0;a-=o){var u=n>>a&i;var s=e[u];if(s===undefined){s=Array(r);e[u]=s}e=s}e[n&i]=t;this.length++;return this};Vector.prototype.set_m=function(t,r){t=getProperIndex(this,t);if(t>=this.length||t<0){throw new Error("out of bounds: "+t.toString())}var n=this.root;var e=this.bits;var o=this.mask;for(var i=this.shift;i>0;i-=e){n=n[t>>i&o]}n[t&o]=r;return this};Vector.prototype.append=function(t){var r=this.bits;var n=this.mask;function e(i,a,u){if(a>0){var s=u>>a&n;if(!i){var c=Array(o)}else{var c=i.slice()}c[s]=e(c[s],a-r,u);return c}else{var s=u&n;if(i==null){var c=Array(o)}else{var c=i.slice()}c[s]=t;return c}}var o=Vector.prototype.width;if(Math.pow(o,this.depth)===this.length){var i=Array(o);i[0]=this.root;i[1]=Array(o);var a=e(i,this.depth*this.bits,this.length);return new Vector(a,this.length+1,this.depth+1)}else{var a=e(this.root,this.shift,this.length);return new Vector(a,this.length+1,this.depth)}};Vector.prototype.set=function(t,r){t=getProperIndex(this,t);if(t>=this.length+this.start||t<0){throw new Error("out of bounds: "+t.toString())}var n=this.bits;var e=this.mask;function o(t,i,a){if(i>0){var u=a>>i&e;var s=t.slice();s[u]=o(s[u],i-n,a);return s}else{var u=a&e;var s=t.slice();s[u]=r;return s}}var i=Vector.prototype.width;var a=o(this.root,this.shift,t);return new Vector(a,this.length,this.depth)};Vector.prototype.insert=function(t,r){t=getProperIndex(this,t);if(t>=this.length+this.start||t<0){throw new Error("out of bounds: "+t.toString())}var n=this.bits;var e=this.mask;var o=this;function i(t,r,o,s){if(r>0){var c=o>>r&e;if(t){var h=[]}else{var h=t.slice()}var f=i(h[c],r-n,o,s);h[c]=f[0];var l=null;if(f[1]){l=f[1];for(var p=c+1;p<u;p++){var f=i(h[p],r-n,p<<r,l);h[p]=f[0];l=f[1]}}return[h,l]}else{var c=o&e;return a(t,c,s)}}function a(t,r,n){var e=[];for(var o=0;o<u-1;o++){if(r===o){e.push(n)}e.push(t[o])}if(r===o){e.push(n)}return[e,t[u-1]]}var u=Vector.prototype.width;var s=i(this.root,this.shift,t,r);if(s[1]){return new Vector(s[0],this.length+1,this.depth).append(s[1])}else{return new Vector(s[0],this.length+1,this.depth)}};Vector.prototype.toArray=function(){var t=[];for(var r=0;r<this.length;r++){t[r]=this.get(r)}return t};Vector.prototype.toString=function(){return"["+this.toArray().join(",")+"]"};Vector.prototype.operator_eq=function(t){if(this.length!==t.length)return false;if(this===t)return true;for(var r=0;r<this.length;r++){if(!this.get(r).operator_eq(t.get(r))){return false}}return true};Vector.prototype.map=function(t){var r=EmptyVector;var n=this.length;for(var e=0;e<n;e++){r=r.append_m(t(this.get(e),e))}return r};Vector.prototype.filter=function(t){var r=EmptyVector;var n=this.length;for(var e=0;e<n;e++){var o=this.get(e);if(t(o)){r=r.append_m(o)}}return r};Vector.prototype.reduce=function(t){if(this.length==1){return this.get(0)}else if(this.length===0){throw Error("Cannot reduce empty vector")}var r=this.length;var n=this.get(0);for(var e=1;e<r;e++){n=t(n,this.get(e))}return n};Vector.prototype.join=function(t){if(t.length==0){return""}var r=this.get(0);var n=this.length;for(var e=1;e<n;e++){r+=t+this.get(e)}return r};Vector.prototype.slice=function(t,r){t=getProperIndex(this,t);if(!r){r=this.length}else{r=getProperIndex(this,r)}return new Vector(this.root,r-t,this.depth,t)};function getProperIndex(t,r){r+=t.start;if(r<0){return t.length+r}return r}Vector.prototype.has=function(t){for(var r=0;r<this.length;r++){if(this.get(r).operator_eq(t)){return true}}return false};Vector.prototype.operator_add=function(t){var r=this;for(var n=0;n<t.length;n++){r=r.append(t.get(n))}return r};Vector.prototype.shorten=function(t){return new Vector(this.root,this.length-t,this.depth)};function newVector(){return fromArray(Array.prototype.slice.call(arguments))}function fromArray(t){var r=EmptyVector;for(var n=0;n<t.length;n++){r=r.append_m(t[n])}return r}function newVectorRange(t,r){var n=EmptyVector;for(var e=t;e<r;e++){n=n.append_m(e)}return n}function newVectorInit(t,r){var n=EmptyVector;for(var e=0;e<t;e++){n=n.append_m(r)}return n}var main_fs=require("fs");var http=require("http");function server_readFile(t,r){main_fs.readFile(t,function(t,n){if(t){r([1])}else{r([0,n])}})}function _http_get(t,r){http.get({path:t},r)}function server_createServer(t){return http.createServer(function(r,n){r.url=decodeURI(r.url);t(r,function(t){n.writeHead(t.status,{"Content-Type":t.contentType});n.end(t.body,t.encoding)})})}var _monk_connect=require("monk");function _monk_get(t,r,n){var e=t.get(r);e.decoder=n;return e}function _monk_find(t,r,n){console.log("finding");t.find(r).catch(function(){console.log("can not connect to database")}).then(function(r){n(fromArray(r.map(t.decoder)))})}function _monk_search(t,r,n,e){var o={$text:{$search:n}};r=Object.assign({},r,o);console.log("searching");t.find(r).catch(function(){console.log("can not connect to database")}).then(function(r){e(fromArray(r.map(t.decoder).reverse()))})}function _monk_insert(t,r,n){t.insert(r);n()}function server_handleQuery(t,r,n){var e=t.slice(t.indexOf("/",2)+1);e=decodeURI(e);e=JSON.parse(e);e[e.length-1]=function t(r){return{body:JSON.stringify(r),status:200,contentType:"text"}};r(e,n)}function server_isQuery(t){return t.slice(1,t.indexOf("/",2))==="query"}function html_nodeInit(){var t=0;return function r(n){while(1){switch(t){case 0:html_style=html_newAttrib.bind(null,"style");html_placeHolder=html_newAttrib.bind(null,"placeholder");html_position=html_newAttrib.bind(null,"position");html__type=html_newAttrib.bind(null,"type");html_height=html_newAttrib.bind(null,"height");html_width=html_newAttrib.bind(null,"width");html_id=html_newAttrib.bind(null,"id");html_min=html_newAttrib.bind(null,"min");html_max=html_newAttrib.bind(null,"max");html_step=html_newAttrib.bind(null,"step");html_value=html_newAttrib.bind(null,"value");html_href=html_newAttrib.bind(null,"href");html_src=html_newAttrib.bind(null,"src");html_kind=html_newAttrib.bind(null,"type");html__float=html_newAttrib.bind(null,"float");html_class=html_newAttrib.bind(null,"className");html_onClick=html_onEvent.bind(null,"onclick");html_onInput=html_onEvent.bind(null,"oninput");html_onChange=html_onEvent.bind(null,"onchange");html_noAttrib=EmptyVector;return}}}()}var html_style;var html_placeHolder;var html_position;var html__type;var html_height;var html_width;var html_id;var html_min;var html_max;var html_step;var html_value;var html_href;var html_src;var html_kind;var html__float;var html_class;var html_onClick;var html_onInput;var html_onChange;var html_noAttrib;function html_PosAtom(t,r){this.a=t;this.pos=r}html_PosAtom.fields=["a","pos"];html_PosAtom.prototype.unary_read=function(t){return html_PosAtom_unary_read(this,t)};function html_PosAtom_unary_read(t,r){var n=0;return function e(o){while(1){switch(n){case 0:n=1;return t.a.unary_read(e);case 1:;return r(t.pos.query(o))}}}()}html_PosAtom.prototype.operator_set=function(t,r){return html_PosAtom_operator_set(this,t,r)};function html_PosAtom_operator_set(t,r,n){var e=0;return function o(i){while(1){switch(e){case 0:e=2;return t.a.unary_read(o);case 2:;e=3;return t.a.operator_set(t.pos.set(i,r),o);case 3:return n(i)}}}()}html_PosAtom.prototype.watch=function(t,r){return html_PosAtom_watch(this,t,r)};function html_PosAtom_watch(t,r,n){var e=0;return function o(i){while(1){switch(e){case 0:function a(n,e){var o=0;return function n(i){while(1){switch(o){case 0:o=4;return t.a.unary_read(n);case 4:;o=5;return r(t.pos.query(i),n);case 5:return e(i)}}}()}e=6;return t.a.watch(a,o);case 6:return n(i)}}}()}function html_comp(t){return t}function html_Event(t){this.target=t}html_Event.fields=["target"];function html_Attribute(t,r){this.name=t;this.value=r}html_Attribute.fields=["name","value"];function html_newAttrib(t,r){return new html_Attribute(t,r,r)}function html_onEvent(t,r,n){function e(t,e){var o=0;return function i(a){while(1){switch(o){case 0:o=7;return n.unary_read(i);case 7:;o=8;return r(a,t,i);case 8:o=9;return n.operator_set(a,i);case 9:return e(a)}}}()}return new html_Attribute(t,e,e)}function html_async(t,r){function n(n){var e=0;return function o(i){while(1){switch(e){case 0:e=14;return r.unary_read(o);case 14:;e=15;return t(i,o);case 15:e=16;return r.operator_set(i,o);case 16:return n(i)}}}()}return n}function html_ignoreAct(t){function r(r,n,e){var o=0;return function n(i){while(1){switch(o){case 0:o=17;return t(r,n);case 17:return e(i)}}}()}return r}function html_withId(t){function r(r,n,e,o){var i;var a=0;return function u(s){while(1){switch(a){case 0:a=18;return t(n.get(r),e,u);case 18:i=s;return o(n.set(r,i))}}}()}return r}function html_mapWithId(t,r,n){function e(e){return t(r.get(e),e,n)}return newVectorRange(0,r.length).map(e)}function html_toEffect(t){function r(r,n,e){var o=0;return function i(a){while(1){switch(o){case 0:return e(t(r,n))}}}()}return r}function html_mapView(t,r,n){function e(e){var o;o=r.get(e);var i;i=newLens(function(t){return t.get(e)},function(t,r){return t.set(e,r)});var a;a=new html_PosAtom(n,i,i);return t(o,a)}return newVectorRange(0,r.length).map(e)}function html_viewFromLens(t,r,n,e){return t(n.query(r),new html_PosAtom(e,n,n))}function html_get(t){var r=0;return function n(e){while(1){switch(r){case 0:return t()}}}()}function http_nodeInit(){var t=0;return function r(n){while(1){switch(t){case 0:http_response=new http_Response(200,"text/plain","","");http_port=process.env.PORT||3e3;http_server=server_createServer;http_handleQuery=server_handleQuery;http_isQuery=server_isQuery;return}}}()}var http_response;var http_port;var http_server;var http_handleQuery;var http_isQuery;function http_Server(t){this.listen=t}http_Server.fields=["listen"];function http_NodeHTTP(t){this.createServer=t}http_NodeHTTP.fields=["createServer"];function http_Request(t){this.url=t}http_Request.fields=["url"];function http_Response(t,r,n){this.status=t;this.contentType=r;this.body=n}http_Response.fields=["status","contentType","body"];http_Response.prototype.toString=function(){return http_Response_toString(this)};function http_Response_toString(t){return"Response("+t.status.toString()+", ".toString()+t.contentType.toString()+", ".toString()+t.body.toString()+")".toString()}function http_endResponse(t){return core_assign(http_response,{body:jsonStringify(t)})}function http_toUrl(t){return"query/"+jsonStringify(t(http_endResponse))}function main_nodeInit(){var t=0;return function r(n){while(1){switch(t){case 0:http_nodeInit();main__read=server_readFile;main_quit=process.exit;main_server=http_server(main_requestHandler);t=5;return main_server.listen(http_port,r);case 5:log("started web server on port "+http_port.toString()+"".toString());html_nodeInit();main_style=typeof html_style=="undefined"||html_style;main_onClick=typeof html_onClick=="undefined"||html_onClick;main_comp=typeof html_comp=="undefined"||html_comp;main_mapView=typeof html_mapView=="undefined"||html_mapView;main_toEffect=typeof html_toEffect=="undefined"||html_toEffect;main_add=main_toEffect(function(t,r){return t+1|0});main_sub=main_toEffect(function(t,r){return function(){if(t===0){return 0}else{return t-1|0}}()});main_reset=main_toEffect(function(t,r){return 0});main_append=main_toEffect(function(t,r){return t.append(0)});main_remove=main_toEffect(function(t,r){return t.shorten(1)});main_resetAll=main_toEffect(function(t,r){return newVectorInit(t.length,0)});main_counter=function(t,r){return main_div(newVector(main_style("width: 100%;")),newVector(main_button(newVector(main_onClick(main_add,r)),"+"),main_span(EmptyVector," "+t.toString()+" ".toString()),main_button(newVector(main_onClick(main_sub,r)),"-"),main_button(newVector(main_onClick(main_reset,r))," reset")))};main_list=function(t,r){return main_div(EmptyVector,newVector(main_h1(EmptyVector,"Dynamic List"),main_button(newVector(main_onClick(main_append,r)),"Add Counter"),main_button(newVector(main_onClick(main_remove,r)),"Remove Counter"),main_button(newVector(main_onClick(main_resetAll,r)),"Reset All Counter"),main_br,main_br,main_div(EmptyVector,main_mapView(main_counter,t,r))))};return}}}()}var main__read;var main_quit;var main_server;var main_add;var main_sub;var main_reset;var main_append;var main_remove;var main_resetAll;var main_counter;var main_list;var main_h1;var main_span;var main_br;var main_button;var main_app;var main_div;var main_style;var main_render;var main_onClick;var main_comp;var main_mapView;var main_toEffect;function main_read(t,r){var n;var e;var o;var i=0;return function n(e){while(1){switch(i){case 0:i=1;return main__read(t,n);case 1:return r(function(){var r=e;if(r[0]==0){var n=r[1];return n}if(r[0]==1){log("cannot find file, "+t);return main_quit(1)}}())}}}()}function main_requestHandler(t,r){var n;var e;var o;var i=0;return function n(e){while(1){switch(i){case 0:log("request, "+t.url);var o=t.url;if(o=="/"){i=3;return main__read("EC.html",n)}i=4;break;case 3:e=function(){var t=e;if(t[0]==0){var r=t[1];return core_assign(http_response,{body:r,contentType:"text/html"})}if(t[0]==1){return core_assign(http_response,{status:404})}}();i=2;break;case 4:if(1){e=core_assign(http_response,{status:404,body:"404 Page not found"});i=2;break}case 2:return r(e)}}}()}main_nodeInit();