function main_fullInit(){var d=0;return function c(b){while(1){switch (d){case 0:http_fullInit();main__read = server_readFile;main_quit = process.exit;d=2;return main_read("Simulation.html",c);case 2:main_htmlFile = b;d=3;return main_read("images/variation.png",c);case 3:main_logo = b;d=4;return main_read("images/async.png",c);case 4:main_async = b;d=5;return main_read("images/tools.png",c);case 5:main_tools = b;d=6;return main_read("images/arrow.ico",c);case 6:main_favicon = b;d=7;return main_read("images/error.png",c);case 7:main_error = b;main_port = process.env.PORT || 3000;main_server = http_server(main_requestHandler);d=8;return (main_server).listen(main_port,c);case 8:log((((("started web server on port ")+((main_port)).toString()))+("").toString()));main_i = function(){var f="string"; if (f=="string"){return "ok";} if (f==null){return "err";}}();html_fullInit();main_appState = newAtom(new main_App(newVector("EXAMPLES","DOCS","COMMUNITY","BLOG"),newVector(new main_Feature("fet0","A Simple Asynchronous Model","Top allows synchronous looking code to behave asynchronously under the hood.            Have the performance of callbacks without the pyramid of doom. Use the builtin high performance concurrent datastructes making concurrency a breeze","async.png","async.png"),new main_Feature("fet1","Batteries Included","The Top Compiler comes with great and simple to use tools, from automatically bundles and minifiying all javascript and css, to testing and benchmarking.            No need to setup complicated compilation pipelines, just use the builtin tools.            Even an easy to use live hot replacement tool is already included.","tools.png","tools.png"),new main_Feature("fet2","Safety","Thanks to top's functional nature and it's static type system runtime exceptions are rare.            Instead the compiler catches errors at compile time and helps the programmer locate them.            Furthermore, as Top is a full-stack language even requests to the server can be typed, eliminating pain stacking hours of incorrect queries.","error.png","error.png")),"All code for this site is written in Top, including the server - Lucas Goetz","All code for this site is written in Top, including the server - Lucas Goetz"));main_logoUrl = "arrow.png";d=9;return html_app(main_render,main_appState,c);case 9:d=10;return main_appState.unary_read(c);case 10:;main_fets = ((b)).features;main_getId = newLens(function(p){return (p).id}, function(q,p){return Object.assign(new q.constructor(), q,{id:p})});main_elements = (main_fets).map((function(r){return html_cssSelector(function(s){return (operator_add.bind(null,"#"))((main_getId).query(s))}(r))}));d=11;return serial((main_elements).map(defer((function(v){return function(t,w){return html_animateOnVisible(t,v,w);}})("fade-in"))),c);case 11:return;}}}()}var main__read;var main_quit;var main_htmlFile;var main_logo;var main_async;var main_tools;var main_favicon;var main_error;var main_port;var main_server;var main_i;var main_appState;var main_logoUrl;var main_fets;var main_getId;var main_elements;function main_map(c, d){return (d).map(c);}function main_filter(c, d){return (d).filter(c);}function main_reduce(c, d){return (d).reduce(c);}function main_comp(c, d){return c(d);}function main_zip(c, d){var f;f = newVector();var g;main_i = 0;
while((g<(c).length)){f=(f).append((newVector(c.get(g),d.get(g))));g=((g+1)|0);}return f;}function main_append(c, d){return (d).append(c);}function main_first(c){return c.get(0);}function main_toEffect(c){function d(f,g){var k=0;return function j(h){while(1){switch(k){case 0:return g(c(f));}}}()}return d;}function main_read(c,d){var h=0;return function g(f){while(1){switch(h){case 0:h=1;return main__read(c,g);case 1:return d(function(){var j=f; if (j[0]==0){var k=j[1];return k;} if (j[0]==1){log(("cannot find file, "+c));return main_quit(1);}}());}}}()}function main_requestHandler(c,d){var h=0;return function g(f){while(1){switch(h){case 0:log(("request, "+(c).url));return d((function(){if(((c).url==="/")){return core_assign(http_response,{body:main_htmlFile,contentType:"text/html"});}else if(((c).url==="/arrow.png")){return core_assign(http_response,{body:main_logo,contentType:"image/png"});}else if(((c).url==="/async.png")){return core_assign(http_response,{body:main_async,contentType:"image/png"});}else if(((c).url==="/tools.png")){return core_assign(http_response,{body:main_tools,contentType:"image/png"});}else if(((c).url==="/favicon.ico")){return core_assign(http_response,{body:main_favicon,contentType:"image/x-icon"});}else if(((c).url==="/error.png")){return core_assign(http_response,{body:main_error,contentType:"image/png"});}
else{return core_assign(http_response,{status:404,body:"File not found"});}})());}}}()}function main_Feature(g,h,j,k){this.id=g;this.name=h;this.description=j;this.image=k;}main_Feature.fields=newVector("id","name","description","image");function main_App(l,m,n){this.headers=l;this.features=m;this.footer=n;}main_App.fields=newVector("headers","features","footer");function main_navBar(c){function d(f){return html_li(newVector(html_class("nav-bar")),html_a(newVector(html_class("nav-bar")),f));}return html_ul(newVector(html_class("nav-bar")),newVector(html_li(html_noAttrib,html_image(newVector(html_src(main_logoUrl),html_style("width:50px;height:50px;float:left;padding:10px;")),""))).operator_add((c).map(d)));}function main_features(c){function d(f){return html_li(newVector(html_class("container")),html_div(newVector((html_class("cleared")),(html_style("clear:both")),html_id((f).id)),newVector(html_h2(newVector(html_style("margin-left: 10%; margin-bottom: 2em;")),(f).name),html_div(newVector(),newVector(html_image(newVector(html_src((f).image),html_style("width: 50%; height: auto; float: right; padding-right: 10%; margin-left: 5%")),""),html_p(newVector(html_style("line-height: 150%; padding-left: 10%;")),(f).description))))));}return html_ul(newVector(html_class("feature")),(c).map(d));}function main_footer(c){return html_div(newVector(),newVector(html_hr(newVector(),""),html_h4(newVector(html_style("line-height: 5em; width: 100%; text-align: center; opacity: 0.4;")),c)));}function main_render(c, d){return html_div(html_noAttrib,newVector(html_div(newVector(html_class("background")),newVector(main_navBar((c).headers),html_h1(newVector(html_class("header")),"Top"),html_h3(newVector(html_class("header")),"A Language designed for full-stack development"))),html_h1(newVector(html_class("sub-header")),"Why Top?"),main_features((c).features),main_footer((c).footer)));}